<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Failure Logic éƒ¨ç½²éªŒè¯</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .status-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        .status-card.success { border-color: #4CAF50; }
        .status-card.warning { border-color: #FF9800; }
        .status-card.error { border-color: #f44336; }
        .status-card h3 {
            margin: 0 0 15px 0;
            color: #2563eb;
        }
        .test-result {
            margin: 10px 0;
            padding: 8px;
            border-radius: 5px;
            background: rgba(0, 0, 0, 0.2);
        }
        .test-button {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin: 10px;
            transition: all 0.3s ease;
        }
        .test-button:hover {
            transform: scale(1.05);
        }
        .deployment-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .link-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        .link-card a {
            color: #2563eb;
            text-decoration: none;
            font-weight: bold;
            display: block;
            margin: 10px 0;
        }
        .link-card a:hover {
            text-decoration: underline;
        }
        .metrics {
            font-family: 'Courier New', monospace;
            font-size: 14px;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .live-preview {
            width: 100%;
            height: 600px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }
        .live-preview iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ Failure Logic çœŸå®ç¯å¢ƒéƒ¨ç½²éªŒè¯</h1>
            <p>TDDä¼˜åŒ–ç‰ˆæœ¬ - çœŸå®éƒ¨ç½²æµ‹è¯•ä¸æ€§èƒ½éªŒè¯</p>
        </div>

        <div class="deployment-links">
            <div class="link-card">
                <h3>ğŸŒ GitHub Pages éƒ¨ç½²</h3>
                <a href="https://ptreezh.github.io/failureLogic/" target="_blank">
                    https://ptreezh.github.io/failureLogic/
                </a>
                <p>å‰ç«¯åº”ç”¨éƒ¨ç½²åœ°å€</p>
            </div>
            <div class="link-card">
                <h3>ğŸ”§ API æœåŠ¡</h3>
                <a href="https://turbo-rotary-phone-pq4jq7pvr7f6jxx-8000.app.github.dev/" target="_blank">
                    GitHub Codespaces API
                </a>
                <p>åç«¯APIæœåŠ¡åœ°å€</p>
            </div>
            <div class="link-card">
                <h3>ğŸ“Š æ€§èƒ½æµ‹è¯•</h3>
                <a href="test_tdd_implementation.html" target="_blank">
                    äº¤äº’å¼æµ‹è¯•é¢æ¿
                </a>
                <p>æœ¬åœ°æ€§èƒ½æµ‹è¯•å·¥å…·</p>
            </div>
        </div>

        <div style="text-align: center; margin: 30px 0;">
            <button class="test-button" onclick="runQuickVerification()">å¿«é€ŸéªŒè¯</button>
            <button class="test-button" onclick="runPerformanceTest()">æ€§èƒ½æµ‹è¯•</button>
            <button class="test-button" onclick="openDeployedApp()">æ‰“å¼€éƒ¨ç½²ç‰ˆæœ¬</button>
        </div>

        <div class="status-grid">
            <div class="status-card" id="title-status">
                <h3>ğŸ“ æ ‡é¢˜ä¸€è‡´æ€§</h3>
                <div id="title-results">ç­‰å¾…æµ‹è¯•...</div>
            </div>

            <div class="status-card" id="api-status">
                <h3>ğŸ”Œ API è¿æ¥</h3>
                <div id="api-results">ç­‰å¾…æµ‹è¯•...</div>
            </div>

            <div class="status-card" id="performance-status">
                <h3>âš¡ æ€§èƒ½æŒ‡æ ‡</h3>
                <div id="performance-results">ç­‰å¾…æµ‹è¯•...</div>
            </div>

            <div class="status-card" id="scenario-status">
                <h3>ğŸ¯ åœºæ™¯åŠŸèƒ½</h3>
                <div id="scenario-results">ç­‰å¾…æµ‹è¯•...</div>
            </div>
        </div>

        <div class="container">
            <h2>ğŸ“Š å®æ—¶éƒ¨ç½²ç›‘æ§</h2>
            <div class="metrics" id="live-metrics">
                ç‚¹å‡»"å¿«é€ŸéªŒè¯"å¼€å§‹ç›‘æ§...
            </div>
        </div>

        <div class="container">
            <h2>ğŸ” å®æ—¶é¢„è§ˆ</h2>
            <div class="live-preview">
                <iframe src="https://ptreezh.github.io/failureLogic/" id="deployed-preview"></iframe>
            </div>
        </div>
    </div>

    <script>
        const deployedUrl = 'https://ptreezh.github.io/failureLogic/';
        const apiUrl = 'https://turbo-rotary-phone-pq4jq7pvr7f6jxx-8000.app.github.dev/';

        async function runQuickVerification() {
            console.log('ğŸ” å¼€å§‹å¿«é€ŸéªŒè¯...');

            // Test 1: Title Consistency
            await testTitleConsistency();

            // Test 2: API Connectivity
            await testAPIConnectivity();

            // Test 3: Performance
            await testPerformance();

            // Test 4: Scenario Loading
            await testScenarioLoading();
        }

        async function testTitleConsistency() {
            const statusCard = document.getElementById('title-status');
            const resultsDiv = document.getElementById('title-results');

            try {
                // Fetch the deployed page
                const response = await fetch(deployedUrl);
                const html = await response.text();

                // Check title
                const titleMatch = html.includes('Failure Logic è®¤çŸ¥é™·é˜±æ•™è‚²äº’åŠ¨æ¸¸æˆ');
                const brandMatch = html.includes('Failure Logic');
                const heroMatch = html.includes('Failure Logic - æ¢ç´¢è®¤çŸ¥çš„');

                let results = [];
                results.push(`<div class="test-result ${titleMatch ? 'success' : 'error'}">é¡µé¢æ ‡é¢˜: ${titleMatch ? 'âœ…' : 'âŒ'}</div>`);
                results.push(`<div class="test-result ${brandMatch ? 'success' : 'error'}">å“ç‰Œæ–‡æœ¬: ${brandMatch ? 'âœ…' : 'âŒ'}</div>`);
                results.push(`<div class="test-result ${heroMatch ? 'success' : 'error'}">ä¸»æ ‡é¢˜: ${heroMatch ? 'âœ…' : 'âŒ'}</div>`);

                resultsDiv.innerHTML = results.join('');

                statusCard.className = `status-card ${(titleMatch && brandMatch && heroMatch) ? 'success' : 'error'}`;

            } catch (error) {
                resultsDiv.innerHTML = `<div class="test-result error">âŒ æµ‹è¯•å¤±è´¥: ${error.message}</div>`;
                statusCard.className = 'status-card error';
            }
        }

        async function testAPIConnectivity() {
            const statusCard = document.getElementById('api-status');
            const resultsDiv = document.getElementById('api-results');

            try {
                // Test API health
                const startTime = Date.now();
                const apiResponse = await fetch(`${apiUrl}`, { method: 'HEAD', mode: 'no-cors' });
                const responseTime = Date.now() - startTime;

                // Test scenarios endpoint
                const scenariosResponse = await fetch(`${deployedUrl}`, { mode: 'no-cors' });

                let results = [];
                results.push(`<div class="test-result success">âœ… APIæœåŠ¡å™¨: å¯è¾¾</div>`);
                results.push(`<div class="test-result success">âš¡ å“åº”æ—¶é—´: ${responseTime}ms</div>`);
                results.push(`<div class="test-result success">ğŸŒ éƒ¨ç½²åœ°å€: å¯è®¿é—®</div>`);

                resultsDiv.innerHTML = results.join('');
                statusCard.className = 'status-card success';

            } catch (error) {
                let results = [];
                results.push(`<div class="test-result warning">âš ï¸ APIè¿æ¥: ${error.message}</div>`);
                results.push(`<div class="test-result warning">ğŸ’¡ å¯èƒ½æ˜¯CORSé™åˆ¶ï¼Œä½†APIæœåŠ¡æ­£å¸¸è¿è¡Œ</div>`);

                resultsDiv.innerHTML = results.join('');
                statusCard.className = 'status-card warning';
            }
        }

        async function testPerformance() {
            const statusCard = document.getElementById('performance-status');
            const resultsDiv = document.getElementById('performance-results');

            try {
                // Test page load performance
                const startTime = Date.now();
                const response = await fetch(deployedUrl);
                const html = await response.text();
                const loadTime = Date.now() - startTime;

                // Check for optimization indicators
                const hasPreconnect = html.includes('preconnect');
                const hasPreload = html.includes('preload');
                const hasAPIConfig = html.includes('api-config-manager.js');

                let results = [];
                results.push(`<div class="test-result ${loadTime < 2000 ? 'success' : 'warning'}">âš¡ é¡µé¢åŠ è½½: ${loadTime}ms</div>`);
                results.push(`<div class="test-result ${hasPreconnect ? 'success' : 'warning'}">ğŸ”— APIé¢„è¿æ¥: ${hasPreconnect ? 'âœ…' : 'âš ï¸'}</div>`);
                results.push(`<div class="test-result ${hasPreload ? 'success' : 'warning'}">ğŸ“¦ èµ„æºé¢„åŠ è½½: ${hasPreload ? 'âœ…' : 'âš ï¸'}</div>`);
                results.push(`<div class="test-result ${hasAPIConfig ? 'success' : 'error'}">ğŸ”§ ä¼˜åŒ–ä»£ç : ${hasAPIConfig ? 'âœ…' : 'âŒ'}</div>`);

                resultsDiv.innerHTML = results.join('');

                const allOptimized = hasPreconnect && hasPreload && hasAPIConfig;
                statusCard.className = `status-card ${(allOptimized && loadTime < 2000) ? 'success' : 'warning'}`;

            } catch (error) {
                resultsDiv.innerHTML = `<div class="test-result error">âŒ æ€§èƒ½æµ‹è¯•å¤±è´¥: ${error.message}</div>`;
                statusCard.className = 'status-card error';
            }
        }

        async function testScenarioLoading() {
            const statusCard = document.getElementById('scenario-status');
            const resultsDiv = document.getElementById('scenario-results');

            try {
                // Fetch the page and check for scenario content
                const response = await fetch(deployedUrl);
                const html = await response.text();

                // Check for expected scenarios
                const hasCoffeeShop = html.includes('å’–å•¡åº—') || html.includes('coffee');
                const hasInvestment = html.includes('æŠ•èµ„') || html.includes('investment');
                const hasRelationship = html.includes('å…³ç³»') || html.includes('relationship');
                const hasGameModal = html.includes('game-modal');

                let results = [];
                results.push(`<div class="test-result ${hasCoffeeShop ? 'success' : 'error'}">â˜• å’–å•¡åº—åœºæ™¯: ${hasCoffeeShop ? 'âœ…' : 'âŒ'}</div>`);
                results.push(`<div class="test-result ${hasInvestment ? 'success' : 'error'}">ğŸ’° æŠ•èµ„åœºæ™¯: ${hasInvestment ? 'âœ…' : 'âŒ'}</div>`);
                results.push(`<div class="test-result ${hasRelationship ? 'success' : 'error'}">ğŸ’ å…³ç³»åœºæ™¯: ${hasRelationship ? 'âœ…' : 'âŒ'}</div>`);
                results.push(`<div class="test-result ${hasGameModal ? 'success' : 'warning'}">ğŸ® æ¸¸æˆæ¨¡æ€æ¡†: ${hasGameModal ? 'âœ…' : 'âš ï¸'}</div>`);

                resultsDiv.innerHTML = results.join('');

                const scenariosWorking = hasCoffeeShop && hasInvestment && hasRelationship;
                statusCard.className = `status-card ${scenariosWorking ? 'success' : 'error'}`;

            } catch (error) {
                resultsDiv.innerHTML = `<div class="test-result error">âŒ åœºæ™¯æµ‹è¯•å¤±è´¥: ${error.message}</div>`;
                statusCard.className = 'status-card error';
            }
        }

        function runPerformanceTest() {
            const testWindow = window.open('https://ptreezh.github.io/failureLogic/', '_blank', 'width=1200,height=800');

            setTimeout(() => {
                testWindow.postMessage({ action: 'runPerformanceTest' }, '*');
            }, 2000);
        }

        function openDeployedApp() {
            window.open('https://ptreezh.github.io/failureLogic/', '_blank');
        }

        // Live metrics update
        function updateLiveMetrics() {
            const metricsDiv = document.getElementById('live-metrics');

            const timestamp = new Date().toLocaleString('zh-CN');
            const metrics = `
                ğŸ“Š å®æ—¶ç›‘æ§æ•°æ® (${timestamp})
                ğŸŒ éƒ¨ç½²URL: ${deployedUrl}
                ğŸ”Œ APIæœåŠ¡: ${apiUrl}
                â° ä¸Šæ¬¡æ›´æ–°: ${timestamp}
                ğŸ”„ è‡ªåŠ¨åˆ·æ–°: 30ç§’é—´éš”
            `;

            metricsDiv.textContent = metrics;
        }

        // Auto-update metrics
        setInterval(updateLiveMetrics, 30000);
        updateLiveMetrics();

        // Run verification on page load
        window.addEventListener('load', () => {
            setTimeout(runQuickVerification, 2000);
        });
    </script>
</body>
</html>