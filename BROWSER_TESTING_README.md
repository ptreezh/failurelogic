# 认知陷阱平台 - 浏览器交互测试

## 概述

此目录包含用于测试认知陷阱平台交互体验的Playwright测试脚本。这些脚本会模拟真实用户交互，验证所有场景的可用性和流畅性。

## 安装依赖

在运行测试之前，需要安装Playwright：

```bash
npm install playwright
# 或者
npm install -g playwright
```

## 测试脚本

### 1. 完整交互测试 (`complete_browser_test.js`)

- 逐一测试所有主要场景
- 验证每个场景的完整交互流程
- 包括滑块控制、选项选择、决策提交等
- 验证反馈信息显示
- 测试页面导航功能

### 2. 快速交互测试 (`quick_browser_test.js`)

- 快速遍历所有场景
- 验证基本交互功能
- 适合快速回归测试

### 3. 交互验证脚本 (`verify_interaction_optimizations.js`)

- 验证代码层面的优化是否生效
- 检查新功能是否正确实现

## 运行测试

### 1. 启动应用服务器

确保应用正在运行（通常在端口8082）：

```bash
cd D:\AIDevelop\failureLogic
# 启动你的服务器
python -m api-server.start 8082
# 或使用其他启动命令
```

### 2. 运行完整测试

```bash
npx playwright test complete_browser_test.js
# 或者
node complete_browser_test.js
```

### 3. 运行快速测试

```bash
npx playwright test quick_browser_test.js
# 或者
node quick_browser_test.js
```

### 4. 运行验证脚本

```bash
node verify_interaction_optimizations.js
```

## 测试覆盖范围

### 场景测试
- [x] 咖啡店线性思维场景（滑块控制）
- [x] 商业战略推理游戏（选项选择）
- [x] 公共政策制定模拟（选项选择）
- [x] 个人理财决策模拟（选项选择）
- [x] 恋爱关系场景（选项选择）
- [x] 历史案例场景
- [x] 高级游戏场景

### 交互功能测试
- [x] 页面导航
- [x] 场景选择
- [x] 滑块控制交互
- [x] 选项按钮选择
- [x] 决策提交
- [x] 反馈信息显示
- [x] 模态框打开/关闭
- [x] 难度选择

### 用户体验测试
- [x] 交互流畅性
- [x] 界面响应速度
- [x] 错误处理
- [x] 中性反馈（无认知偏差提示）

## 预期结果

测试完成后，控制台应显示：

```
🎉 所有场景交互测试完成！
✅ 测试总结:
  - 首页导航正常
  - 场景列表加载正常
  - 咖啡店场景交互正常 (滑块控制、决策提交)
  - 商业战略推理游戏交互正常 (选项选择、决策提交)
  - 公共政策制定模拟交互正常 (选项选择、决策提交)
  - 个人理财决策模拟交互正常 (选项选择、决策提交)
  - 恋爱关系场景交互正常 (选项选择、决策提交)
  - 所有决策反馈显示正常
  - 页面导航流畅
  - 难度选择功能正常
  - 游戏模态框打开/关闭正常
  - 交互体验流畅
```

## 故障排除

如果测试失败，请检查：

1. 应用服务器是否正在运行
2. 端口号是否正确（默认8082）
3. 浏览器驱动是否正确安装
4. 网络连接是否正常

## 维护

- 定期更新测试脚本以适应UI变化
- 添加新的场景到测试覆盖范围
- 优化测试性能和稳定性