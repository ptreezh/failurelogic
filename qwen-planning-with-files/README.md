# Planning with Files for Qwen

将 Claude Code 的 planning-with-files 插件功能迁移到 Qwen 环境中，实现类似 Manus AI 的基于文件的规划模式。

## 概述

这个项目实现了 Manus-style 的基于文件的规划系统，用于复杂任务的规划、进度跟踪和知识存储。它创建三个关键文件：
- `task_plan.md` - 跟踪阶段和进度
- `findings.md` - 存储研究和发现
- `progress.md` - 会话日志和测试结果

## 功能特性

### 1. Skills 实现
- 提供核心规划逻辑
- 包含文件操作、状态跟踪等功能
- 提供详细的使用指南和模板

### 2. Hooks 实现
- **PreToolUse Hook**: 在执行重要操作前自动读取规划文件
- **PostToolUse Hook**: 在文件更新后提醒同步规划状态
- **Stop Hook**: 在结束任务前验证所有阶段完成

### 3. Slash Command 实现
- `/planning-with-files:start` - 初始化规划文件
- `/planning-with-files:status` - 检查当前任务状态
- `/planning-with-files:catchup` - 恢复上次会话上下文

### 4. 跨平台支持
- 支持 Windows (批处理脚本)
- 支持 Linux/macOS (shell 脚本)

## 快速开始

### 1. 安装
将此目录中的文件复制到您的 Qwen 环境中适当的插件/技能目录。

### 2. 初始化规划文件
在开始任何复杂任务之前，运行:
```
/planning-with-files:start
```

这将创建以下文件（如果不存在）：
- `task_plan.md` - 任务计划和进度跟踪
- `findings.md` - 发现和研究成果存储
- `progress.md` - 会话日志和测试结果

### 3. 使用规划文件
遵循以下原则使用规划文件：

#### 核心模式
```
上下文窗口 = RAM (易失性，有限)
文件系统 = 磁盘 (持久性，无限)

→ 任何重要的信息都写入磁盘。
```

#### 关键规则
1. **先创建计划** - 在开始复杂任务前始终创建 `task_plan.md`
2. **2-动作规则** - 每执行2次查看/浏览/搜索操作后，立即保存关键发现到文本文件
3. **决策前重读** - 在做重要决定前重读计划文件
4. **行动后更新** - 完成任何阶段后更新状态
5. **记录所有错误** - 每个错误都要记录在计划文件中
6. **永不重复失败** - 不要重复相同的失败操作

## 文件用途

| 文件 | 用途 | 更新时机 |
|------|------|----------|
| `task_plan.md` | 阶段、进度、决策 | 每个阶段完成后 |
| `findings.md` | 研究、发现 | 任何发现后 |
| `progress.md` | 会话日志、测试结果 | 整个会话期间 |

## 脚本工具

### init-session.[sh/bat]
初始化三个规划文件，使用预定义模板。

### check-complete.[sh/bat]
检查任务完成情况，验证所有阶段是否标记为完成。

## 集成到 Qwen

要将此功能完全集成到 Qwen 环境中：

1. 将 `SKILL.md` 添加到 Qwen 的技能系统
2. 配置 `HOOKS_CONFIG.yaml` 中定义的钩子
3. 注册 `SLASH_COMMANDS.yaml` 中定义的斜杠命令
4. 确保脚本具有适当的执行权限

## 原理

这个实现基于 Manus AI 的上下文工程模式，该模式因其实现了有效的长期记忆和任务管理而备受关注。通过将重要信息存储在持久文件中而不是依赖于有限的上下文窗口，AI 代理可以：

- 维护长期目标和进度
- 避免目标漂移
- 记录错误以防止重复
- 有效地管理复杂多步骤任务

## 何时使用

**适用于：**
- 多步骤任务（3个以上步骤）
- 研究任务
- 构建/创建项目
- 需要多次操作的任务
- 任何需要组织的任务

**不适用于：**
- 简单问题
- 单文件编辑
- 快速查找

## 许可证

MIT 许可证 - 请参阅原始 planning-with-files 项目获取更多信息。